<!DOCTYPE html>
<html lang="en">
<head><meta name="generator" content="Hexo 3.8.0">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="keyword" content="">
    <link rel="shortcut icon" href="/img/favicon.ico">

    <title>
        
        git分支管理模型 - undefined
        
    </title>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/aircloud.css">
    <link rel="stylesheet" href="/css/gitment.css">
    <!--<link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">-->
    <link href="//at.alicdn.com/t/font_620856_pl6z7sid89qkt9.css" rel="stylesheet" type="text/css">
    <!-- ga & ba script hoook -->
    <script></script>
</head>

<body>

<div class="site-nav-toggle" id="site-nav-toggle">
    <button>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
    </button>
</div>

<div class="index-about">
    <i>  </i>
</div>

<div class="index-container">
    
    <div class="index-left">
        
<div class="nav" id="nav">
    <div class="avatar-name">
        <div class="avatar ">
            <img src="/img/spring.png">
        </div>
        <div class="name">
            <i>rason</i>
        </div>
    </div>
    <div class="contents" id="nav-content">
        <ul>
            <li>
                <a href="/">
                    <i class="iconfont icon-shouye1"></i>
                    <span>主页</span>
                </a>
            </li>
<!--            <li >
                <a href="/tags">
                    <i class="iconfont icon-biaoqian1"></i>
                    <span>标签</span>
                </a>
            </li>
    -->        <li>
                <a href="/archives">
                    <i class="iconfont icon-guidang2"></i>
                    <span>存档</span>
                </a>
            </li>
            <li>
                <a href="/about/">
                    <i class="iconfont icon-guanyu2"></i>
                    <span>关于</span>
                </a>
            </li>
            
        </ul>
    </div>
    
        <div id="toc" class="toc-article">
    <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#前言"><span class="toc-text">前言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#主分支"><span class="toc-text">主分支</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#辅助分支"><span class="toc-text">辅助分支</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Feature-branches"><span class="toc-text">Feature branches</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Release-branches"><span class="toc-text">Release branches</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Hotfix-branches"><span class="toc-text">Hotfix branches</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#git-flow"><span class="toc-text">git-flow</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#参考资料"><span class="toc-text">参考资料</span></a></li></ol>
</div>
    
</div>


<div class="search-field" id="search-field">
    <div class="search-container">
        <div class="search-input">
            <span id="esc-search"> <i class="icon-fanhui iconfont"></i></span>
            <input id="search-input">
            <span id="begin-search">搜索</span>
        </div>
        <div class="search-result-container" id="search-result-container">

        </div>
    </div>
</div>

        <div class="index-about-mobile">
            <i>  </i>
        </div>
    </div>
    
    <div class="index-middle">
        <!-- Main Content -->
        


<div class="post-container">
    <div class="post-title">
        git分支管理模型
    </div>

    <div class="post-meta">
        <span class="attr">发布于：<span>2016-12-22 15:16:02</span></span>
        
        <span class="attr">标签：/
        
        <a class="tag" href="/tags/#git分支管理" title="git分支管理">git分支管理</a>
        <span>/</span>
        
        
        </span>
        <span class="attr">访问：<span id="busuanzi_value_page_pv"></span>
</span>

    </div>
    <div class="post-content ">
        <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>git之所以强大就是因为它对分支的管理非常简便，鼓励我们开发任何功能点都应该先建立一个分支，甚至是修改一个极其微小的Bug，因为建立分支的成本实在是太低了。今天我们来学习一下如何利用git分支来进行开发工作，前人已经总结出了一个相对成熟的分支管理模型，如下图：</p>
<p><img src="http://nvie.com/img/git-model@2x.png" alt="git-branching-mode"></p>
<a id="more"></a>
<h2 id="主分支"><a href="#主分支" class="headerlink" title="主分支"></a>主分支</h2><p><img src="http://nvie.com/img/main-branches@2x.png" alt="主分支"></p>
<ul>
<li><p>master和develop是主分支，这两个分支存在于整个项目的开发周期，除非项目挂了或公司倒闭了，一般不会删除这两个分支。</p>
</li>
<li><p>这两个分支一般来说会控制权限，只有管理员才能进行merge和push操作，普通开发者只能往其它分支(比如特性分支)提交代码，然后发起<code>merge request</code>请求将其它分支的代码合并到develop分支中。</p>
</li>
<li><p>master分支是一个稳定、无Bug的分支，线上系统都应该是根据master分支进行发布的，在下一个发布代码提交之前，master分支的代码应该是跟线上代码一样才对，只有在准备发布生产环境时才将develop(测试通过后)的代码merge到master中。</p>
</li>
<li><p>develop是开发分支，在进行特性开发之前，都是以develop分支为基础检出一个特性分支来进行开发。多个特性开发同时进行则以develop分支为基础检出多个特性分支。也就是说，develop分支是开发的基础分支，特性功能开发完之后提交merge request请求将特性功能合并到develop分支中进行测试环境测试。</p>
</li>
</ul>
<h2 id="辅助分支"><a href="#辅助分支" class="headerlink" title="辅助分支"></a>辅助分支</h2><ul>
<li>Feature branches（特性分支）</li>
<li>Release branches（发布分支）</li>
<li>Hotfix branches（紧急修复分支）</li>
</ul>
<p>以上三个分支称为辅助分支，利用完之后一般会删除掉。</p>
<h3 id="Feature-branches"><a href="#Feature-branches" class="headerlink" title="Feature branches"></a>Feature branches</h3><p>在开发一个新功能特性的时候，我们就会以develop分支为基础检出一个特性分支，开发完之后将代码合并回develop分支，没问题的话这个特性分支就可以删除了。</p>
<p><img src="http://nvie.com/img/fb@2x.png" alt="Feature branches"></p>
<p>一般工作流程：</p>
<ul>
<li>检出一个特性分支：<code>git checkout -b myfeature develop</code></li>
<li>进行开发</li>
<li>将代码推送到远程仓库对应的特性分支：<code>git push origin myfeature</code></li>
<li>在gitlab中提交merge request请求合并到develop分支中（此处以gitlab为例）</li>
</ul>
<h3 id="Release-branches"><a href="#Release-branches" class="headerlink" title="Release branches"></a>Release branches</h3><p>在准备发布生产环境时，管理员会已develop分支为基础检出一个发布分支，注意这个操作一般是由管理员来进行的。发布分支可以用来添加一些版本信息或者进行一些小修改。如果准备发布时开发人员发现还有一点小Bug，就可以已发布分支为基础检出一个新的分支修复问题，修复完之后提交merge request请求合并回release分支，然后管理员准备发布工作，将release分支的代码分别合并到develop分支和master分支，然后将master分支的代码发布生产。</p>
<p>一般工作流程：</p>
<ul>
<li>检出一个发布分支：<code>git checkout -b release-1.2 develop</code></li>
<li>修改版本信息</li>
<li>合并回master分支，打tag</li>
<li>合并回develop分支</li>
<li>删除release分支</li>
</ul>
<h3 id="Hotfix-branches"><a href="#Hotfix-branches" class="headerlink" title="Hotfix branches"></a>Hotfix branches</h3><p>当生产发现问题时，我们就可以已master分支为基础检出一个Hotfix分支，因为master分支的代码跟线上代码是一致的，develop分支的代码可能已经合并了一些正在进行的特性功能代码在测试。然后开发人员在Hotfix分支进行Bug修复，修复完之后由管理员将Hotfix分支的代码合并回master分支和develop分支，这个过程跟release分支合并类似。</p>
<p>一般工作流程：</p>
<ul>
<li>检出一个Hotfix分支：<code>git checkout -b hotfix-1.2.1 master</code></li>
<li>修改bug</li>
<li>修改版本信息</li>
<li>合并回master分支，打tag</li>
<li>合并回develop分支</li>
<li>删除Hotfix分支</li>
</ul>
<h2 id="git-flow"><a href="#git-flow" class="headerlink" title="git-flow"></a>git-flow</h2><p>看完上面分支管理模型，用惯SVN的人一定会觉得异常麻烦，修复一个小Bug也需要进行一系列操作：检出分支，提交代码，合并分支，删除分支等。<code>git-flow</code>就是将这些复杂的操作合并起来的命令集，关于<code>git-flow</code>的学习可以参考<a href="http://danielkummer.github.io/git-flow-cheatsheet/index.zh_CN.html" target="_blank" rel="noopener">git-flow备忘清单</a>和它的<a href="https://github.com/nvie/gitflow" target="_blank" rel="noopener">源码</a>，此处就不展开学习了。</p>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ul>
<li><a href="http://nvie.com/posts/a-successful-git-branching-model" target="_blank" rel="noopener">A successful Git branching model</a></li>
<li><a href="https://zhangmengpl.gitbooks.io/gitlab-guide/content/whatisgitflow.html" target="_blank" rel="noopener">基于git-flow的团队协作</a></li>
<li><a href="https://github.com/nvie/gitflow" target="_blank" rel="noopener">git-flow源码</a></li>
<li><a href="https://www.git-tower.com/learn/git/ebook/cn/command-line/advanced-topics/git-flow#start" target="_blank" rel="noopener">git-flow工作流程</a></li>
<li><a href="http://danielkummer.github.io/git-flow-cheatsheet/index.zh_CN.html" target="_blank" rel="noopener">git-flow备忘清单</a></li>
</ul>

        
        <br>
        <div id="comment-container">
        </div>
        <div id="disqus_thread"></div>

        <div id="lv-container">
        </div>

    </div>
</div>

    </div>
</div>


<footer class="footer">
    <ul class="list-inline text-center">
        
        

        

        

        

        

    </ul>
    
    <p>
<!--        <span id="busuanzi_container_site_pv">
            <span id="busuanzi_value_site_pv"></span>PV
        </span>
        <span id="busuanzi_container_site_uv">
            <span id="busuanzi_value_site_uv"></span>UV
        </span>
    Created By <a href="https://hexo.io/">Hexo</a>  Theme <a href="https://github.com/aircloud/hexo-theme-aircloud">AirCloud</a></p> -->
</p></footer>




</body>

<script>
    // We expose some of the variables needed by the front end
    window.hexo_search_path = ""
    window.hexo_root = "/"
    window.isPost = true
</script>
<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
<script src="/js/index.js"></script>
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




</html>
