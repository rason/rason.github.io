---
title: Http Request Method
date: 2017-11-23 09:35:58
categories: Network
tags: HTTP
description: Http Request Method
---

## 前言

根据[RFC](https://tools.ietf.org/html/rfc7231#page-21)的描述，HTTP 中的请求方法代表着请求的语义，也就是说方法名指示着客户端请求的目的。但是，在我们的实际开发过程中，很多人都没有重视甚至不知道这些方法的语义，所以在服务端实现这些方法时并没有遵循相关的语义。

那么，什么是语义？拿`GET` 方法来说，`GET` 代表根据请求获取某一特定的请求资源，因此该方法应该只用于查询获取操作，每次返回的结果应该都是一样的，对服务器不会产生什么影响，是一个只读的操作。但是，如果我们在服务器端用`GET` 方法来实现删除操作，那这样的操作就是不符合语义的。

那么，HTTP 协议中的有哪些请求方法，分别代表什么样的语义？

## 请求方法

|方法|描述|
|:----:|:------------:|
|GET|获取一个目标资源的当前代表|
|HEAD|类似GET，但是只获取状态行和头部信息|
|POST|根据请求信息对特定资源进行处理|
|PUT|根据请求信息对目标资源的所有代表进行替换|
|DELETE|删除目标资源的所有代表|
|CONNECT|与目标资源标识的服务器建立隧道|
|OPTIONS|描述目标资源的连接选项|
|TRACE|在目标资源的路径上执行消息回路测试|

上面的这些方法，根据其语义可以分成以下三类属性。

## 方法属性

### 安全方法

如果方法被定义的语义本质上是只读的，那么该方法被认为是“安全”的。当客户端将安全方法应用于目标资源，并不希望对服务器端产生任何状态的改变。同样地，合理地使用安全方法不会对服务器造成任何伤害，丢失属性或负载异常。

安全方法的定义并不能阻止服务器是怎么实现的。比如说方法的实现包含了一些潜在的危险行为或者引起一些副作用。例如，许多服务器都会对请求信息进行日志记录。

根据RFC 的定义，GET, HEAD, OPTIONS, 和 TRACE 方法都被定义为安全方法。

区分安全方法和不安全方法的目的是允许自动检索程序（爬虫）和缓存性能优化（预取）工作而不用担心对服务器造成伤害。此外，允许用户代理（比如浏览器）在自动使用不安全方法处理潜在不可信的内容时添加适当的限制。比如，我们在刷新表单的时候，可能会进行表单重复提交，这时浏览器一般会有个提示，问我们是不是要重复提交。

用户代理（浏览器）向用户呈现潜在操作时应该区分安全与不安全方法，以便用户可以在被请求之前知道不安全的动作。

### 幂等方法

如果多次执行相同的请求和一次执行的结果是一样的，那么该方法就被认为是“幂等”的。

与安全性的定义一样，幂等属性只表示用户要求的是什么。但是服务器可以不遵循，服务器可以自由地记录每个请求，保留修订控制历史或实现每个幂等请求的其他非幂等副效应。

区分幂等方法的原因是，在客户端能够读取服务器响应之前，如果通信故障发生，请求可以自动重复。例如，如果客户端发送一个`PUT` 请求并且在响应接收之前连接断开了，客户端可以重新连接然后重试这个幂等请求。

### 可缓存方法

请求方法可以定义为“缓存”来表明他们的响应可以被保存以备将来使用。一般来说，安全方法都被定义为可缓存的。根据RFC 的定义，GET, HEAD, 和 POST 被定义为可缓存的，虽然绝大多数情况下缓存的实现只支持GET 和 HEAD 方法。

## 总结

|方法|是否安全|是否幂等|是否可缓存|
|:----:|:----:||:----:|
|GET|是|是|是|
|HEAD|是|是|是|
|POST|否|否|是(有条件限制)|
|PUT|否|是|否|
|DELETE|否|是|否|
|OPTIONS|是|是|否|
|TRACE|是|是|否|

因此，在使用这些请求方法时，我们应该尽可能按照语义使用。每个方法的详细说明在RFC 中都有介绍，可以自行查阅。
